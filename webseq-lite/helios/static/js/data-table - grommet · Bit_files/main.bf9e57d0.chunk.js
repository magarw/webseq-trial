(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{174:function(e,t){},187:function(e,t){},232:function(e,t){},262:function(e,t){},284:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});var r=n(40),o=n.n(r),a=n(61),i=n(41),s=n(43),c=function(){function t(e){Object(i.a)(this,t),this.container=e}return Object(s.a)(t,[{key:"readArchive",value:function(t){return this.container.get({path:t.toString()}).then(function(t){var n="";return t.on("data",function(e){n+=e}),new e(n)})}},{key:"putArchive",value:function(){var e=Object(a.a)(o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r={})[t.toString()]=n,e.abrupt("return",this.container.put(r,{path:"/capsule"}));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"readFile",value:function(e,t,n){this.readArchive(e).then(function(e){return n(void 0,e)}).catch(function(e){return n(e)})}},{key:"writeFile",value:function(){var e=Object(a.a)(o.a.mark(function e(t,n,r,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.putArchive(t.toString(),n).then(function(){if(a)return a()}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r,o){return e.apply(this,arguments)}}()}],[{key:"fromJSON",value:function(e,n){var r=new t(e);return r}}]),t}()}).call(this,n(107).Buffer)},307:function(e,t){var n={emitWarning:function(){},env:{NODE_PATH:0},browser:!0,platform:"browser",getuid:function(){return 100},getgid:function(){return 100}};e.exports=n,e.exports.default=n},309:function(e,t){},321:function(e,t,n){e.exports=n(570)},326:function(e,t,n){},328:function(e,t,n){},334:function(e,t,n){},499:function(e,t,n){},501:function(e,t,n){},509:function(e,t){},511:function(e,t){},542:function(e,t){},545:function(e,t){},547:function(e,t){},570:function(e,t,n){"use strict";n.r(t);var r=n(26),o=n.n(r),a=n(310),i=n.n(a),s=(n(326),n(328),n(330),n(40)),c=n.n(s),u=n(61),d=n(41),l=n(43),f=n(76),p=n(65),g=n(77),h=n(193),v=n.n(h),k=n(257),m=n(258),b=n.n(m),y=n(146),j=n(125),O=n.n(j),w=(n(334),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleMouseDown=function(){n.props.onDragStarted()},n.handleTouchStart=function(){n.props.onDragStarted()},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.className,r=e.children,a={};return t&&(a.flexBasis=t),o.a.createElement("div",{className:O()(n,"splitter"),style:a,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart},r)}}]),t}(r.PureComponent));function C(e){return o.a.createElement(w,Object.assign({},e,{className:O()("fat-splitter",e.className)}),o.a.createElement("span",{className:"column-handle"},"\u2550"),o.a.createElement("span",{className:"row-handle"},"\u2551"))}n(262);function E(e){var t=e.content,n=e.size,r=e.layout,a=e.disabled,i={};return void 0!==n&&["row","row-reverse"].includes(r)?i.width=n:i.width="100",void 0!==n&&["column","column-reverse"].includes(r)?i.height=n:i.height="100",a&&(i.pointerEvents="none",i.userSelect="none"),i.width=D(i.width),i.height=D(i.height),o.a.createElement("div",{className:"split-pane",style:i},t)}function D(e){return e?"".concat(e,"%"):e}var x=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(f.a)(this,Object(p.a)(t).call(this,e))).containerRef=o.a.createRef(),n.handleDragStarted=function(){n.setState({isDragging:!0})},n.handleDragEnded=function(){n.state.isDragging&&n.setState({isDragging:!1})},n.handleDragging=function(e){var t=e.clientX,r=e.clientY;if(n.state.isDragging){var o=n.props,a=o.min,i=void 0===a?0:a,s=o.max,c=void 0===s?100:s,u=n.containerRef.current;if(u){var d=u.getBoundingClientRect(),l=d.height,f=d.left,p=d.top,g=d.width,h=1,v=0;["row","row-reverse"].includes(n.props.layout)&&(h=g,v=t-f),["column","column-reverse"].includes(n.props.layout)&&(h=l,v=r-p);var k=function(e,t,n){return Math.max(e,Math.min(t,n))}(i,v/h*100,c);["row-reverse","column-reverse"].includes(n.props.layout)&&(k=100-k),n.setState({ratio:k})}}},n.handleMouseMove=function(e){var t=e.clientX,r=e.clientY;n.handleDragging({clientX:t,clientY:r})},n.handleTouchMove=function(e){var t=e.touches[0],r=t.clientX,o=t.clientY;n.handleDragging({clientX:r,clientY:o})},n.handleMouseEnter=function(e){e&&1===e.buttons||n.handleDragEnded()};var r=e.ratio,a=void 0===r?38:r;return n.state={isDragging:!1,ratio:a},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleDragEnded),document.addEventListener("mouseenter",this.handleMouseEnter),document.addEventListener("touchend",this.handleDragEnded),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("touchcancel",this.handleDragEnded)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleDragEnded),document.removeEventListener("mouseenter",this.handleMouseEnter),document.removeEventListener("touchend",this.handleDragEnded),document.removeEventListener("touchmove",this.handleTouchMove),document.removeEventListener("touchcancel",this.handleDragEnded)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.layout,r=e.Splitter,a=this.state.isDragging;if(!t||2!==t.length)return{children:t};var i=Object(y.a)(t,2),s=i[0],c=i[1],u=a?"split-pane-dragging":"";return o.a.createElement("div",{className:"split-pane-container ".concat(n," ").concat(u),ref:this.containerRef},o.a.createElement(E,{layout:n,disabled:this.state.isDragging,content:s,size:this.state.ratio}),o.a.createElement(r,{enabled:this.state.isDragging,onDragStarted:this.handleDragStarted}),o.a.createElement(E,{layout:n,disabled:this.state.isDragging,content:c,size:100-this.state.ratio}))}}]),t}(r.PureComponent);x.defaultProps={Splitter:C};var S=n(63),F=n(143),B=n(255),L=n(200),M=["javascript"];function I(){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new L.Registry({getGrammarDefinition:function(){var e=Object(u.a)(c.a.mark(function e(t){var n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=(e.t0,3);break;case 3:return e.next=5,fetch("/grammars/javascriptReact.tmLanguage.json");case 5:return e.next=7,e.sent.text();case 7:return n=e.sent,e.abrupt("return",{format:"json",content:n});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(e,t){return Promise.all(t.map(function(){var t=Object(u.a)(c.a.mark(function t(n){var r,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadGrammar(n);case 3:r=t.sent,o=U(r),setTimeout(function(){F.languages.setTokensProvider(n,o)},0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}()))}function U(e){return{getInitialState:function(){return new R(L.INITIAL)},tokenize:function(t,n){var r=e.tokenizeLine(t,n.ruleStack),o=r.tokens.map(function(e){return Object(S.a)({},e,{scopes:e.scopes[e.scopes.length-1]})});return{endState:new R(r.ruleStack),tokens:o}}}}var R=function(){function e(t){Object(d.a)(this,e),this._stackElementBrand=void 0,this.depth=0,this._ruleStack=t}return Object(l.a)(e,[{key:"clone",value:function(){return new e(this._ruleStack)}},{key:"equals",value:function(t){return!!(t&&t instanceof e&&t===this&&t._ruleStack===this._ruleStack)}},{key:"ruleStack",get:function(){return this._ruleStack}}]),e}(),T=!1;function W(){return(W=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:return T=!0,e.next=5,Object(B.loadWASM)("/grammars/onigasm.wasm");case 5:return e.next=7,I();case 7:return t=e.sent,e.next=10,A(t,M);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var N={base:"vs-dark",inherit:!0,colors:{"editor.background":"#1E1E1E","editor.foreground":"#D4D4D4","editor.inactiveSelectionBackground":"#3A3D41","editorIndentGuide.background":"#404040","editorIndentGuide.activeBackground":"#707070","editor.selectionHighlightBackground":"#ADD6FF26","list.dropBackground":"#383B3D","activityBarBadge.background":"#007ACC","sideBarTitle.foreground":"#BBBBBB","input.placeholderForeground":"#A6A6A6","settings.textInputBackground":"#292929","settings.numberInputBackground":"#292929","menu.background":"#252526","menu.foreground":"#CCCCCC"},rules:[{token:"meta.embedded",foreground:"#D4D4D4"},{token:"source.groovy.embedded",foreground:"#D4D4D4"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"header",foreground:"#000080"},{token:"comment",foreground:"#6A9955"},{token:"constant.language",foreground:"#569cd6"},{token:"constant.numeric",foreground:"#b5cea8"},{token:"constant.regexp",foreground:"#646695"},{token:"entity.name.tag",foreground:"#569cd6"},{token:"entity.name.tag.css",foreground:"#d7ba7d"},{token:"entity.other.attribute-name",foreground:"#9cdcfe"},{token:"entity.other.attribute-name.class.css",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.class.mixin.css",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.id.css",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.parent-selector.css",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.pseudo-class.css",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.pseudo-element.css",foreground:"#d7ba7d"},{token:"source.css.less entity.other.attribute-name.id",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.attribute.scss",foreground:"#d7ba7d"},{token:"entity.other.attribute-name.scss",foreground:"#d7ba7d"},{token:"invalid",foreground:"#f44747"},{token:"markup.underline",fontStyle:"underline"},{token:"markup.bold",foreground:"#569cd6",fontStyle:"bold"},{token:"markup.heading",foreground:"#569cd6",fontStyle:"bold"},{token:"markup.italic",fontStyle:"italic"},{token:"markup.inserted",foreground:"#b5cea8"},{token:"markup.deleted",foreground:"#ce9178"},{token:"markup.changed",foreground:"#569cd6"},{token:"punctuation.definition.quote.begin.markdown",foreground:"#6A9955"},{token:"punctuation.definition.list.begin.markdown",foreground:"#6796e6"},{token:"markup.inline.raw",foreground:"#ce9178"},{token:"punctuation.definition.tag",foreground:"#808080"},{token:"meta.preprocessor",foreground:"#569cd6"},{token:"meta.preprocessor.string",foreground:"#ce9178"},{token:"meta.preprocessor.numeric",foreground:"#b5cea8"},{token:"meta.structure.dictionary.key.python",foreground:"#9cdcfe"},{token:"meta.diff.header",foreground:"#569cd6"},{token:"storage",foreground:"#569cd6"},{token:"storage.type",foreground:"#569cd6"},{token:"storage.modifier",foreground:"#569cd6"},{token:"string",foreground:"#ce9178"},{token:"string.tag",foreground:"#ce9178"},{token:"string.value",foreground:"#ce9178"},{token:"string.regexp",foreground:"#d16969"},{token:"punctuation.definition.template-expression.begin",foreground:"#569cd6"},{token:"punctuation.definition.template-expression.end",foreground:"#569cd6"},{token:"punctuation.section.embedded",foreground:"#569cd6"},{token:"meta.template.expression",foreground:"#d4d4d4"},{token:"support.type.vendored.property-name",foreground:"#9cdcfe"},{token:"support.type.property-name",foreground:"#9cdcfe"},{token:"variable.css",foreground:"#9cdcfe"},{token:"variable.scss",foreground:"#9cdcfe"},{token:"variable.other.less",foreground:"#9cdcfe"},{token:"source.coffee.embedded",foreground:"#9cdcfe"},{token:"keyword",foreground:"#569cd6"},{token:"keyword.control",foreground:"#569cd6"},{token:"keyword.operator",foreground:"#d4d4d4"},{token:"keyword.operator.new",foreground:"#569cd6"},{token:"keyword.operator.expression",foreground:"#569cd6"},{token:"keyword.operator.cast",foreground:"#569cd6"},{token:"keyword.operator.sizeof",foreground:"#569cd6"},{token:"keyword.operator.instanceof",foreground:"#569cd6"},{token:"keyword.operator.logical.python",foreground:"#569cd6"},{token:"keyword.other.unit",foreground:"#b5cea8"},{token:"punctuation.section.embedded.begin.php",foreground:"#569cd6"},{token:"punctuation.section.embedded.end.php",foreground:"#569cd6"},{token:"support.function.git-rebase",foreground:"#9cdcfe"},{token:"constant.sha.git-rebase",foreground:"#b5cea8"},{token:"storage.modifier.import.java",foreground:"#d4d4d4"},{token:"variable.language.wildcard.java",foreground:"#d4d4d4"},{token:"storage.modifier.package.java",foreground:"#d4d4d4"},{token:"variable.language",foreground:"#569cd6"},{token:"entity.name.function",foreground:"#DCDCAA"},{token:"support.function",foreground:"#DCDCAA"},{token:"support.constant.handlebars",foreground:"#DCDCAA"},{token:"meta.return-type",foreground:"#4EC9B0"},{token:"support.class",foreground:"#4EC9B0"},{token:"support.type",foreground:"#4EC9B0"},{token:"entity.name.type",foreground:"#4EC9B0"},{token:"entity.name.class",foreground:"#4EC9B0"},{token:"storage.type.numeric.go",foreground:"#4EC9B0"},{token:"storage.type.byte.go",foreground:"#4EC9B0"},{token:"storage.type.boolean.go",foreground:"#4EC9B0"},{token:"storage.type.string.go",foreground:"#4EC9B0"},{token:"storage.type.uintptr.go",foreground:"#4EC9B0"},{token:"storage.type.error.go",foreground:"#4EC9B0"},{token:"storage.type.rune.go",foreground:"#4EC9B0"},{token:"storage.type.cs",foreground:"#4EC9B0"},{token:"storage.type.generic.cs",foreground:"#4EC9B0"},{token:"storage.type.modifier.cs",foreground:"#4EC9B0"},{token:"storage.type.variable.cs",foreground:"#4EC9B0"},{token:"storage.type.annotation.java",foreground:"#4EC9B0"},{token:"storage.type.generic.java",foreground:"#4EC9B0"},{token:"storage.type.java",foreground:"#4EC9B0"},{token:"storage.type.object.array.java",foreground:"#4EC9B0"},{token:"storage.type.primitive.array.java",foreground:"#4EC9B0"},{token:"storage.type.primitive.java",foreground:"#4EC9B0"},{token:"storage.type.token.java",foreground:"#4EC9B0"},{token:"storage.type.groovy",foreground:"#4EC9B0"},{token:"storage.type.annotation.groovy",foreground:"#4EC9B0"},{token:"storage.type.parameters.groovy",foreground:"#4EC9B0"},{token:"storage.type.generic.groovy",foreground:"#4EC9B0"},{token:"storage.type.object.array.groovy",foreground:"#4EC9B0"},{token:"storage.type.primitive.array.groovy",foreground:"#4EC9B0"},{token:"storage.type.primitive.groovy",foreground:"#4EC9B0"},{token:"meta.type.cast.expr",foreground:"#4EC9B0"},{token:"meta.type.new.expr",foreground:"#4EC9B0"},{token:"support.constant.math",foreground:"#4EC9B0"},{token:"support.constant.dom",foreground:"#4EC9B0"},{token:"support.constant.json",foreground:"#4EC9B0"},{token:"entity.other.inherited-class",foreground:"#4EC9B0"},{token:"keyword.control",foreground:"#C586C0"},{token:"variable",foreground:"#9CDCFE"},{token:"meta.definition.variable.name",foreground:"#9CDCFE"},{token:"support.variable",foreground:"#9CDCFE"},{token:"entity.name.variable",foreground:"#9CDCFE"},{token:"meta.object-literal.key",foreground:"#9CDCFE"},{token:"support.constant.property-value",foreground:"#CE9178"},{token:"support.constant.font-name",foreground:"#CE9178"},{token:"support.constant.media-type",foreground:"#CE9178"},{token:"support.constant.media",foreground:"#CE9178"},{token:"constant.other.color.rgb-value",foreground:"#CE9178"},{token:"constant.other.rgb-value",foreground:"#CE9178"},{token:"support.constant.color",foreground:"#CE9178"},{token:"punctuation.definition.group.regexp",foreground:"#CE9178"},{token:"punctuation.definition.group.assertion.regexp",foreground:"#CE9178"},{token:"punctuation.definition.character-class.regexp",foreground:"#CE9178"},{token:"punctuation.character.set.begin.regexp",foreground:"#CE9178"},{token:"punctuation.character.set.end.regexp",foreground:"#CE9178"},{token:"keyword.operator.negation.regexp",foreground:"#CE9178"},{token:"support.other.parenthesis.regexp",foreground:"#CE9178"},{token:"constant.character.character-class.regexp",foreground:"#d16969"},{token:"constant.other.character-class.set.regexp",foreground:"#d16969"},{token:"constant.other.character-class.regexp",foreground:"#d16969"},{token:"constant.character.set.regexp",foreground:"#d16969"},{token:"keyword.operator.or.regexp",foreground:"#DCDCAA"},{token:"keyword.control.anchor.regexp",foreground:"#DCDCAA"},{token:"keyword.operator.quantifier.regexp",foreground:"#d7ba7d"},{token:"constant.character",foreground:"#569cd6"},{token:"constant.character.escape",foreground:"#d7ba7d"},{token:"punctuation.definition.comment.js.jsx",foreground:"#6A9955"},{token:"punctuation.definition.string.begin.js.jsx",foreground:"#ce9178"},{token:"punctuation.definition.string.end.js.jsx",foreground:"#ce9178"},{token:"punctuation.definition.string.template.begin.js.jsx",foreground:"#ce9178"},{token:"punctuation.definition.string.template.end.js.jsx",foreground:"#ce9178"}]};var _=!1;function z(){if(!_){_=!0;var e={"bit-vs-dark":N};Object.keys(e).forEach(function(t){var n=e[t];F.editor.defineTheme(t,n)})}}var G=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).node=null,n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"getOptions",value:function(){return Object(S.a)({},this.props.options,{theme:this.props.theme})}},{key:"getTextOptions",value:function(){return Object(S.a)({},this.props.options.textOptions)}},{key:"componentDidMount",value:function(){var e=this;if(this.node){!function(){W.apply(this,arguments)}(),z();var t=this.props,n=t.path,r=t.value,o=t.language,a=F.editor.createModel(r,o,n);this.editor=F.editor.create(this.node,this.getOptions()),this.editor.setModel(a),this.subscription=a.onDidChangeContent(function(){e.props.onChange&&e.props.onChange(a.getValue())})}}},{key:"componentDidUpdate",value:function(e){if(this.editor){var t=this.props.value;this.editor.updateOptions(this.getOptions());var n=this.editor.getModel();n&&n.updateOptions(this.getTextOptions()),n&&t!==n.getValue()&&this.editor.setValue(t)}}},{key:"getStyle",value:function(){return{height:this.props.height,width:this.props.width}}},{key:"componentWillUnmount",value:function(){this.editor&&this.editor.dispose()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:function(t){return e.node=t},style:this.getStyle()})}}]),t}(r.Component);G.defaultProps={width:"100%",height:"100%",updateCode:!1};var V={automaticLayout:!0,scrollBeyondLastLine:!1,lineNumbersMinChars:2,lineDecorationsWidth:"6.8px",minimap:{enabled:!1},textOptions:{tabSize:2,insertSpaces:!1}},X=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"getOptions",value:function(){var e=this.props,t=e.fontSize,n=e.canWrite,r=void 0===n||n;return Object(S.a)({},V,{fontSize:t,readOnly:!r})}},{key:"render",value:function(){var e=this.props,t=e.code,n=e.onChange;return o.a.createElement("div",{style:{height:"100%",width:"100%",background:"#1E1E1E",overflow:"hidden"}},o.a.createElement(G,{language:"javascript",theme:"bit-vs-dark",value:t,options:this.getOptions(),onChange:n}))}}]),t}(r.Component);X.defaultProps={fontSize:14};var q=n(259),Y=n.n(q),J=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.visible;return o.a.createElement("div",{className:O()("brick-loader-container",t,{"loader-visible":n})},o.a.createElement(Y.a,{size:17,bricks:["#8787F2","#8ACFFF","#fbd280"]}))}}]),t}(r.Component),K=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.visible,t=void 0===e||e;return o.a.createElement("div",{className:O()("cover-all","abs-overlay","brick-loader-container",{"loader-visible":t})},o.a.createElement(Y.a,{size:64,bricks:["#fb507b","#25e1a3","#8acfff"]}),o.a.createElement("div",{className:"initial-load-text"},"Loading playground..."))}}]),t}(r.Component),H=(n(499),function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={random:0},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"reload",value:function(){this.setState({random:this.state.random+1})}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{visible:t,className:"preview"}),o.a.createElement(K,{visible:this.props.primaryLoader}),n)}}]),t}(r.PureComponent)),$="static-site";function Q(e){var t=e.url;return o.a.createElement("iframe",{src:t,id:$,name:$,height:"100%",width:"100%",sandbox:"allow-forms allow-scripts allow-same-origin"})}function Z(e){var t=e.deltaX;0<Math.abs(t)&&(e.stopPropagation(),e.preventDefault())}var ee;n(501);function te(e){return O()(e.toLowerCase().replace("...",""))}function ne(e){var t=e.status;return o.a.createElement("div",{id:"connection-status",className:te(t)},t)}!function(e){e.Connected="Connected",e.Reconnecting="Connecting...",e.Connecting="Connecting...",e.Disconnected="Disconnected",e.Idle="Idle"}(ee||(ee={}));var re=n(145),oe=n(72),ae=n(183),ie=n.n(ae),se=n(311),ce=n.n(se),ue=function e(){Object(d.a)(this,e)},de=n(192),le=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new de.Duplex;Object(d.a)(this,e),this.stdout=t}return Object(l.a)(e,[{key:"getStdout",value:function(){return this.stdout}},{key:"on",value:function(){}}]),e}(),fe=n(312),pe=(n(232),n(187),n(284)),ge=function(){function e(t,n,r,o){Object(d.a)(this,e),this.container=t,this.fs=n,this.console=r,this.state=o}return Object(l.a)(e,[{key:"start",value:function(){return this.container.start()}},{key:"on",value:function(e,t){this.container.on(e,t)}},{key:"updateFs",value:function(e,t){var n=this;Object.keys(e).forEach(function(r){n.fs.writeFile(r,e[r],function(){1===Object.keys(e).length&&t()})})}},{key:"pause",value:function(){return this.container.pause()}},{key:"resume",value:function(){return this.container.resume()}},{key:"stop",value:function(){return this.container.stop()}},{key:"status",value:function(){return this.container.inspect()}},{key:"exec",value:function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.container.exec({command:t.split(" ")});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){return this.container.stop()}},{key:"id",get:function(){return""}},{key:"containerId",get:function(){return this.container.id}}],[{key:"buildFs",value:function(e,t){var n=new fe.Union;return n.use(e).use(t),n}},{key:"create",value:function(){var e=Object(u.a)(c.a.mark(function e(t,n){var r,o,a,i,s=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:new ue,o=s.length>3&&void 0!==s[3]?s[3]:new le,e.next=4,t({image:this.image});case 4:return a=e.sent,e.next=7,pe.a.fromJSON(a,{});case 7:return i=e.sent,e.abrupt("return",new this(a,this.buildFs(n,i),o,r));case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}();ge.image="ubuntu";var he,ve=function(){function e(){Object(d.a)(this,e),this.map={}}return Object(l.a)(e,[{key:"get",value:function(e){return this.map[e]}},{key:"register",value:function(e){var t=this;return e.forEach(function(e){t.map[e.name]=e}),this}}]),e}(),ke=n(313),me=n.n(ke),be=n(169),ye=n(314),je=n.n(ye)()({development:{orchestratorUrl:"https://stg-capsule.bitsrc.io"},stage:{orchestratorUrl:"https://stg-capsule.bitsrc.io"},production:{orchestratorUrl:"https://capsule.bit.dev"},default:{orchestratorUrl:"https://capsule.bit.dev",staticBucket:"https://static.bit.dev"}},"production"),Oe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(d.a)(this,e),this.socket=t,this.sessionId=n,this.stdout=new be.Readable,this.stderr=new be.Readable,this.stdin=new be.Writable}return Object(l.a)(e,[{key:"inspect",value:function(){return Promise.resolve({running:!0,pid:this.sessionId})}},{key:"abort",value:function(){return this.socket.emit("abort",{}),Promise.resolve()}}]),e}(),we=function(){function e(){Object(d.a)(this,e),this.observers=[]}return Object(l.a)(e,[{key:"emit",value:function(e,t){return this.observers.filter(function(t){return t.name===e}).forEach(function(e){return e.fn(t)}),this}},{key:"register",value:function(e,t){return this.observers.push({name:e,fn:t}),this}}]),e}();!function(e){e.Reconnecting="reconnecting",e.Connected="connected",e.Disconnected="disconnected",e.Idle="idle"}(he||(he={}));var Ce=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me.a.connect(je.orchestratorUrl),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new we;Object(d.a)(this,e),this.socket=n,this.observer=r,this.connected=!1,this.idle=!1,this.lastUsed=Date.now(),this.idleInterval=setInterval(Object(u.a)(c.a.mark(function e(){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.lastUsed+18e4,r=Date.now(),!(n<r)||t.idle){e.next=7;break}return t.idle=!0,e.next=6,t.destroy();case 6:t.observer.emit(he.Idle);case 7:case"end":return e.stop()}},e)})),1e3)}return Object(l.a)(e,[{key:"id",get:function(){return this.socket.id}}]),Object(l.a)(e,[{key:"start",value:function(){var e=this;return new Promise(function(t){if(e.socket.connected)return t();e.socket.emit("init"),e.socket.on("disconnect",function(){console.log("disconnected"),e.connected=!1,e.observer.emit(he.Disconnected)}),e.socket.on("ready",function(){console.log("container ready")}),e.socket.on("devReady",function(n){var r=n.url;e.idle=!1,e.connected=!0,e.observer.emit(he.Connected,{url:r}),t()}),e.socket.on("reconnect",function(){e.observer.emit(he.Reconnecting)})})}},{key:"on",value:function(e,t){this.observer.register(e,t)}},{key:"setLastUsed",value:function(){this.lastUsed=Date.now()}},{key:"exec",value:function(e){var t=this;return this.setLastUsed(),new Promise(function(n){t.socket.emit("exec",{command:e.command},function(){n(new Oe(t.socket))})})}},{key:"get",value:function(e){var t=this,n=e.path;return this.setLastUsed(),new Promise(function(e,r){t.socket.emit("readFile",{path:n},function(t){e(new be.Readable)})})}},{key:"put",value:function(e,t){var n=this;return this.setLastUsed(),new Promise(function(t,r){n.socket.on("wroteFs",function(){t()}),n.socket.emit("writeFs",e)})}},{key:"inspect",value:function(){return Promise.resolve({ports:[],host:"localhost"})}},{key:"pause",value:function(){return this.socket.emit("pause",{}),Promise.resolve()}},{key:"resume",value:function(){return this.socket.connect(),this.start()}},{key:"stop",value:function(e){return this.socket.emit("stop"),Promise.resolve()}},{key:"destroy",value:function(){return this.socket.disconnect()}}]),e}(),Ee=n(320),De=n(315),xe=n(316),Se=n.n(xe),Fe=void 0;function Be(e){var t=new Ce;return Fe=t.socket,Promise.resolve(t)}var Le=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(l.a)(t,[{key:"start",value:function(){var e=Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Object(Ee.a)(Object(p.a)(t.prototype),"start",this).call(this);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"installPackages",value:function(e){console.log("call installing packages",e),Fe&&Fe.emit("installPackages",{packageNames:e})}},{key:"installFiles",value:function(e){var t=this;return new Promise(function(n,r){Fe&&(console.debug("installFiles",e),t.setLastUsed(),Fe.emit("installPackagesAndWriteFs",e),Fe.once("packagesInstalledAndFileWrote",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.error)return console.warn("error during package installation"),Object(S.a)({},t,{error:Se()(t.error)});console.debug("installFiles finished",t,e),n(t)}))})}},{key:"installPackagesAndWriteFile",value:function(e,t){var n=Object(oe.a)({},e,t);return this.installFiles(n)}},{key:"setLastUsed",value:function(){this.container.setLastUsed()}},{key:"onInstallation",value:function(e){Fe&&(Fe.on("installingPackages",function(t){console.log("installing packages",t),e("start",t)}),Fe.on("packagesInstalled",function(t){console.log("installed packages",t),e("end",t)}))}}]),t}(ge),Me=function(){var e=Object(u.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.create(Be,t||new De.Volume);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),Ie=new ve;Ie.register([{name:"react",createInstance:Me,generateDefaultCode:ce.a}]);var Pe=function(e){function t(){var e,n;Object(d.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(f.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={resuming:!1,lastChange:null,url:void 0,iframeKey:0},n.loading=!1,n.updatePlayerCode=v()(function(){var e=Object(u.a)(c.a.mark(function e(t,r){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.capsule||n.props.status!==ee.Idle||n.state.resuming){e.next=4;break}return n.setState({resuming:!0}),n.capsule.resume(),e.abrupt("return");case 4:if(!n.loading||r){e.next=7;break}return n.lastChange=t,e.abrupt("return");case 7:return n.props.onLoadingChange(!0),n.loading=!0,e.next=11,n.capsule.installFiles(t);case 11:if(!n.lastChange||r){e.next=13;break}return e.abrupt("return",n.updatePlayerCode(n.lastChange,!0));case 13:r?(n.props.onLoadingChange(!1),n.lastChange=void 0,n.loading=!1):(n.props.onLoadingChange(!1),n.loading=!1),n.props.onUpdated();case 15:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),600),n.reload=function(){n.setState({iframeKey:n.state.iframeKey+1})},n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.initiateCapsule()}},{key:"componentWillUnmount",value:function(){this.capsule&&(this.capsule.destroy(),this.capsule=void 0)}},{key:"componentDidUpdate",value:function(e){var t=this.props;if(this.capsule&&this.capsule.setLastUsed(),e.files!=t.files){var n=Ae(t.files);this.updatePlayerCode(n)}}},{key:"generateDefaultCode",value:function(e){if(!this.defaultCodeGenerator)throw new Error("default code generator is undefined");return this.defaultCodeGenerator(e)}},{key:"initiateCapsule",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,n,r=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ie.get("react"),e.next=3,t.createInstance();case 3:return n=e.sent,this.capsule=n,this.defaultCodeGenerator=t.generateDefaultCode,this.capsule.on("disconnected",function(){r.props.status!==ee.Disconnected&&r.props.onCapsuleStatusChange(ee.Disconnected)}),this.capsule.on("idle",function(){r.props.status!==ee.Idle&&r.props.onCapsuleStatusChange(ee.Idle)}),this.capsule.on("connected",function(){var e=Object(u.a)(c.a.mark(function e(t){var n,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.url,!r.capsule||r.state.status!==ee.Idle){e.next=5;break}return o=Ae(r.props.files),e.next=5,r.capsule.installFiles(o);case 5:r.props.onCapsuleStatusChange(ee.Connected),r.props.onLoadingChange(!1),r.setState({resuming:!1,url:n});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),this.capsule.on("reconnecting",function(){console.log("reconnecting"),r.props.status!==ee.Reconnecting&&r.props.onCapsuleStatusChange(ee.Reconnecting)}),e.next=12,this.capsule.start();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=void 0===t||t,r=e.status,a=this.state,i=a.url,s=a.iframeKey;if(!i)return null;var c={};return n||(c.display="none"),o.a.createElement(o.a.Fragment,null,o.a.createElement(ne,{status:r}),o.a.createElement("iframe",{key:s,style:c,src:i,id:"inside-preview",name:"inside-preview",height:"100%",width:"100%",sandbox:"allow-forms allow-scripts allow-same-origin"}))}}]),t}(r.Component);function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.keys(e).map(function(n){var r=e[n];if(!r||!r.isFile||!r.source)return null;var o=ie.a.join(t,n);return Object(oe.a)({},o,r.source)}).filter(function(e){return!!e});return Object.assign.apply(Object,[{}].concat(Object(re.a)(n)))}Pe.defaultProps={isVisible:!0};var Ue=n(260),Re=n(317),Te=n.n(Re),We=n(318),Ne=n.n(We);var _e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(d.a)(this,e),this.isFile=!0,this.source=n,this.name=ie.a.basename(t),this.path=t,this.relativePath=t}return Object(l.a)(e,[{key:"toObj",value:function(){return{isFile:this.isFile,name:this.name,source:this.source,path:this.path,relativePath:this.relativePath}}}]),e}();var ze,Ge="UPDATE_CURRENT_FILE",Ve={files:{},currentFile:"index.js"},Xe=(ze={},Object(oe.a)(ze,Ge,function(e,t){return function(e,t){var n=t,r=n.fileId,o=n.content,a=(e.files||{})[r]||new _e(r).toObj(),i=Object(S.a)({},e.files,Object(oe.a)({},r,Object(S.a)({},a,{source:o})));return Object(S.a)({},e,{files:i})}(e,Object(S.a)({},t,{fileId:e.currentFile}))}),Object(oe.a)(ze,"ADD_FILE",function(e,t){var n=t.fileId;return e.files&&e.files[n]?e:Object(S.a)({},e,{files:Object(S.a)({},e.files,Object(oe.a)({},n,new _e(n).toObj()))})}),Object(oe.a)(ze,"ADD_FOLDER",function(e,t){var n=t.fileId;return e.files&&e.files[n]?e:Object(S.a)({},e,{files:Object(S.a)({},e.files,Object(oe.a)({},n+"/",{}))})}),Object(oe.a)(ze,"SET_FILES",function(e,t){var n=t.files;return Object(S.a)({},e,{files:n})}),Object(oe.a)(ze,"DEL_FILE",function(e,t){var n=t.fileId;if(!e.files)return e;var r=Object.keys(e.files).filter(function(e){return!e.startsWith(n)}),o=Object.assign.apply(Object,[{}].concat(Object(re.a)(r.map(function(t){return Object(oe.a)({},t,e.files[t])})))),a=(o[e.currentFile]?e.currentFile:r[0])||"";return Object(S.a)({},e,{files:o,currentFile:a})}),Object(oe.a)(ze,"SELECT_FILE",function(e,t){var n=t.fileId;return Object(S.a)({},e,{currentFile:n})}),Object(oe.a)(ze,"RENAME_FILE",function(e,t){var n=t,r=n.prevId,o=n.nextId;if(!e.files)return e;var a=new RegExp("^".concat(Ne()(r))),i=Object.entries(e.files).map(function(e){var t=Object(y.a)(e,2),n=t[0],r=t[1],i=n.replace(a,o),s=n===i?r:function(e,t){return Object(S.a)({},e,{name:ie.a.basename(t),path:t,relativePath:t})}(r,i);return Object(oe.a)({},i,s)}),s=Object.assign.apply(Object,[{}].concat(Object(re.a)(i))),c=e.currentFile.replace(a,o);return Object(S.a)({},e,{files:s,currentFile:c})}),ze);function qe(e){var t=e.currentFile,n=e.files;if(!n||!t)return"";var r=n[t];return r&&r.isFile?"string"!==typeof r.source?"":r.source:""}n(174);n(309);var Ye=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(p.a)(t).call(this,e))).state={code:"",files:{},currentFileId:"",isModified:!1,layout:Object(k.layoutByWindowWidth)()||k.default_layout,canWrite:!0,status:ee.Connecting,loading:!1,primaryLoader:!0,rendered:!1},n.preview=o.a.createRef(),n.capsuleRef=o.a.createRef(),n.player=new b.a({selfFrameId:window.name,targetFrameId:void 0,isDebugging:!0}),n.parent=new b.a({selfFrameId:window.name,targetFrameId:void 0,isDebugging:!0}),n.isSubsribedToModel=!1,n._fileStore=function(){var e=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}(Ve,Xe);return Object(Ue.b)(e,Object(Ue.a)(Te.a))}(),n.reloadPreview=v()(function(e){n.capsuleRef.current&&(n.capsuleRef.current.reload(),console.log("reloading... "),e&&e())},1e3),n.handleDefaultCodeRequest=function(e){var t=n.capsuleRef.current;if(!t)throw new Error("cannot generate default code - capsule is undefined");var r=t.generateDefaultCode(e.id),o=new _e("index.js",r);n.parent.sendMessage("gotDefaultCode",{files:{"index.js":o.toObj()}})},n.handleUpdateConf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canWrite,r=e.layout,o={};!0!==t&&!1!==t||(o.canWrite=t),r&&(o.layout=r),n.setState(o)},n.handleEditorChangedCode=function(e){n.state.code!==e&&(n.setState({isModified:!0}),n._fileStore.dispatch({type:Ge,content:e}))},n.handleCapsuleUpdated=function(){setTimeout(Object(u.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({primaryLoader:!1});case 2:case"end":return e.stop()}},e)})),3e3)},n._fileStore.subscribe(function(){var e=n._fileStore.getState();if(n.isSubsribedToModel){var t=function(e){var t=e.files,n=void 0===t?{}:t;return{files:Object.assign.apply(Object,[{}].concat(Object(re.a)(Object.entries(n).filter(function(e){var t=Object(y.a)(e,2);return t[0],!!t[1].isFile}).map(function(e){var t=Object(y.a)(e,2),n=t[0],r=t[1];return Object(oe.a)({},n,r)}))))}}(e);n.parent.sendMessage("modelDidChange",t)}n.setState({code:qe(e),files:e.files||{},currentFileId:e.currentFile})}),n}return Object(g.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){window.document.body.removeEventListener("mousewheel",Z)}},{key:"componentDidMount",value:function(){console.log("using version 1.0.0"),window.document.body.addEventListener("mousewheel",Z),this.registerParentEvents(),this.registerPlayerEvents(),this.previewLoaded()}},{key:"registerParentEvents",value:function(){var e=this;this.parent.onMessage("getModel",function(){return e.parent.sendMessage("modelDidChange",{code:e.state.code})}),this.parent.onMessage("getDefaultCode",this.handleDefaultCodeRequest.bind(this)),this.parent.onMessage("updateConf",this.handleUpdateConf.bind(this)),this.parent.onMessage("setModel",this.handleSetModel.bind(this)),this.parent.onMessage("triggerReload",this.reloadPreview.bind(this)),this.parent.onMessage("subscribeToModel",function(){return e.isSubsribedToModel=!0}),this.parent.onMessage("unsubscribeToModel",function(){return e.isSubsribedToModel=!1})}},{key:"registerPlayerEvents",value:function(){var e=this;this.player.onMessage("devServerDisconnected",function(){e.state.status===ee.Connected&&setTimeout(function(){e.reloadPreview()},200)}),this.player.onMessage("handleWebpackSuccess",function(t){!1!==t.isHotUpdate||e.state.rendered||(e.reloadPreview(),e.setState({rendered:!0}))})}},{key:"previewLoaded",value:function(){this.parent.sendMessage("didMount",{})}},{key:"handleSetModel",value:function(e){var t=e.targetComponent,n=e.staticUrl;this._fileStore.dispatch({type:"SET_FILES",files:e.files}),this.setState({targetComponent:t,primaryLoader:!n,staticUrl:n,isModified:!1})}},{key:"isLoading",value:function(){return!this.state.primaryLoader&&this.state.loading}},{key:"render",value:function(){var e=this,t=this.state,n=t.layout,r=t.canWrite,a=t.status,i=t.code,s=t.files,c=(t.currentFileId,t.staticUrl),u=t.isModified;return o.a.createElement(x,{layout:n,min:9,max:91,Splitter:C},o.a.createElement(X,{code:i,canWrite:r,onChange:this.handleEditorChangedCode}),o.a.createElement(H,{ref:this.preview,loading:this.isLoading(),primaryLoader:this.state.primaryLoader},o.a.createElement(Pe,{isVisible:u||!c,files:s,status:a,ref:this.capsuleRef,onLoadingChange:function(t){return e.setState({loading:t})},onCapsuleStatusChange:function(t){return e.setState({status:t})},onUpdated:this.handleCapsuleUpdated}),!u&&c&&o.a.createElement(Q,{url:c})))}}]),t}(r.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[321,55,51]]]);
//# sourceMappingURL=main.bf9e57d0.chunk.js.map